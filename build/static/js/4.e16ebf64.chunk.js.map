{"version":3,"sources":["containers/Best.tsx","actions/fetchBestFilms.ts","actions/newBestRequest.ts","../node_modules/react-infinite-scroller/index.js","../node_modules/react-infinite-scroller/dist/InfiniteScroll.js","components/FilmCard/style.ts","components/FilmCard/FilmCard.tsx","components/FilmList/style.ts","components/FilmList/FilmList.tsx"],"names":["connect","state","filmsBest","error","dispatch","stateProps","dispatchProps","fetchData","page","arguments","length","undefined","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","res","data","total_pages","mappedFilmCardsData","wrap","_context","prev","next","type","ActionTypeKeys","GET_BEST_REQUEST","Axios","get","concat","API_KEY","sent","status","results","map","film","id","poster_path","title","overview","posterUrl","GET_BEST_SUCCESS","payload","totalPages","Error","status_code","t0","GET_ERROR","message","stop","_x","apply","this","fetchBestFilms","currentPage","films","resetBestPage","NEW_BEST_REQUEST","props","useEffect","react_default","createElement","FilmList","module","exports","__webpack_require__","defineProperty","value","_createClass","defineProperties","target","i","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_react","_react2","_interopRequireDefault","_propTypes2","obj","__esModule","default","InfiniteScroll","_Component","instance","TypeError","_classCallCheck","_this","self","call","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","scrollListener","bind","eventListenerOptions","mousewheelListener","subClass","superClass","create","constructor","setPrototypeOf","_inherits","Component","pageLoaded","pageStart","options","attachScrollListener","isReverse","loadMore","parentElement","getParentElement","scrollComponent","scrollTop","scrollHeight","beforeScrollHeight","beforeScrollTop","detachScrollListener","detachMousewheelListener","passive","testOptions","document","addEventListener","removeEventListener","e","useCapture","isPassiveSupported","loader","defaultLoader","scrollEl","window","useWindow","parentNode","el","scrollParent","getScrollParent","hasMore","initialLoad","deltaY","preventDefault","offset","doc","documentElement","body","pageYOffset","calculateOffset","clientHeight","Number","threshold","offsetParent","calculateTopPosition","offsetHeight","innerHeight","offsetTop","_this2","renderProps","filterProps","children","element","ref","keys","indexOf","hasOwnProperty","_objectWithoutProperties","node","childrenArray","unshift","push","propTypes","isRequired","bool","func","number","defaultProps","FilmCardWrapper","styled","div","_templateObject","Name","h2","_templateObject2","Description","ul","_templateObject3","StyledLink","Link","_templateObject4","Film","to","bundle_default","height","style","backgroundImage","FilmsWrapper","style_templateObject","EmptyListPlaceholder","style_templateObject2","isLoading","isError","filmCards","Preloader","Array","fill","index","placeholder","react_infinite_scroller_default","react_loading_default","color","toConsumableArray"],"mappings":"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","file":"static/js/4.e16ebf64.chunk.js","sourcesContent":["import React from 'react'\r\nimport { useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport fetchBestFilms from '../actions/fetchBestFilms'\r\nimport newBestRequest from '../actions/newBestRequest'\r\nimport FilmList from '../components/FilmList/FilmList'\r\nimport { AppState } from '../reducers/main'\r\nimport * as State from '../reducers/State'\r\nimport { Action } from 'redux'\r\nimport { ThunkDispatch } from 'redux-thunk'\r\nimport { FilmListProps } from '../models/abstract'\r\n\r\ninterface StateFromProps {\r\n\tfilmsBest: State.BestFilms;\r\n\terror: State.Error;\r\n}\r\n\r\ninterface DispatchFromProps {\r\n\tdispatch: ThunkDispatch<AppState, null, Action<string>>;\r\n}\r\n\r\ninterface MergeProps extends FilmListProps {\r\n\tfetchData: () => void;\r\n\tfilms: State.BestFilms;\r\n\tresetBestPage: () => void;\r\n\terror: State.Error;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState): StateFromProps => {\r\n\tconst { filmsBest, error } = state\r\n\treturn {\r\n\t\tfilmsBest,\r\n\t\terror,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<AppState, null, Action<string>>): DispatchFromProps => {\r\n\treturn {\r\n\t\tdispatch,\r\n\t}\r\n}\r\n\r\nconst mergeProps = (stateProps: StateFromProps, dispatchProps: DispatchFromProps): MergeProps => {\r\n\tconst { filmsBest, error } = stateProps\r\n\tconst { dispatch } = dispatchProps\r\n\tconst fetchData = () => {\r\n\t\tdispatch(fetchBestFilms(filmsBest.currentPage))\r\n\t}\r\n\tconst resetBestPage = () => {\r\n\t\tdispatch(newBestRequest())\r\n\t}\r\n\treturn {\r\n\t\tfetchData,\r\n\t\tfilms: filmsBest,\r\n\t\tresetBestPage,\r\n\t\terror,\r\n\t}\r\n}\r\n\r\nfunction FetchDataWrapper(props: MergeProps) {\r\n\tuseEffect(() => {\r\n\t\tprops.fetchData()\r\n\t\treturn () => props.resetBestPage()\r\n\t}, []) // eslint-disable-line react-hooks/exhaustive-deps\r\n\treturn <FilmList {...props} />\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps,\r\n\tmergeProps\r\n)(FetchDataWrapper)\r\n","import { Action } from 'redux'\r\nimport { API_KEY } from '../constants/constants'\r\nimport FilmCard from '../models/FilmCard'\r\nimport { ActionTypeKeys } from './ActionTypeKeys'\r\nimport { AppState } from '../reducers/main'\r\nimport Axios from '../constants/axios'\r\nimport { ThunkAction } from 'redux-thunk'\r\n\r\nexport default function fetchBestFilms(page = 1): ThunkAction<void, AppState, null, Action<any>> {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypeKeys.GET_BEST_REQUEST,\r\n\t\t})\r\n\t\ttry {\r\n\t\t\tlet res = await Axios.get(`/movie/top_rated?api_key=${API_KEY}&page=${page}`)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconst { data } = res\r\n\t\t\t\tconst { total_pages } = data\r\n\t\t\t\tconst mappedFilmCardsData: FilmCard[] = data.results.map(film => {\r\n\t\t\t\t\tconst { id, poster_path, title, overview } = film\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\toverview,\r\n\t\t\t\t\t\ttitle,\r\n\t\t\t\t\t\tposterUrl: poster_path,\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: ActionTypeKeys.GET_BEST_SUCCESS,\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\tdata: mappedFilmCardsData,\r\n\t\t\t\t\t\ttotalPages: total_pages,\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(res.data.status_code)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: ActionTypeKeys.GET_ERROR,\r\n\t\t\t\tpayload: err.message,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n","import { ActionTypeKeys } from './ActionTypeKeys'\r\n\r\nexport default function newBestRequest() {\r\n\treturn {\r\n\t\ttype: ActionTypeKeys.NEW_BEST_REQUEST,\r\n\t}\r\n}\r\n","module.exports = require('./dist/InfiniteScroll');","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar InfiniteScroll = function (_Component) {\n  _inherits(InfiniteScroll, _Component);\n\n  function InfiniteScroll(props) {\n    _classCallCheck(this, InfiniteScroll);\n\n    var _this = _possibleConstructorReturn(this, (InfiniteScroll.__proto__ || Object.getPrototypeOf(InfiniteScroll)).call(this, props));\n\n    _this.scrollListener = _this.scrollListener.bind(_this);\n    _this.eventListenerOptions = _this.eventListenerOptions.bind(_this);\n    _this.mousewheelListener = _this.mousewheelListener.bind(_this);\n    return _this;\n  }\n\n  _createClass(InfiniteScroll, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.pageLoaded = this.props.pageStart;\n      this.options = this.eventListenerOptions();\n      this.attachScrollListener();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      if (this.props.isReverse && this.loadMore) {\n        var parentElement = this.getParentElement(this.scrollComponent);\n        parentElement.scrollTop = parentElement.scrollHeight - this.beforeScrollHeight + this.beforeScrollTop;\n        this.loadMore = false;\n      }\n\n      this.attachScrollListener();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.detachScrollListener();\n      this.detachMousewheelListener();\n    }\n  }, {\n    key: 'isPassiveSupported',\n    value: function isPassiveSupported() {\n      var passive = false;\n      var testOptions = {\n        get passive() {\n          passive = true;\n        }\n\n      };\n\n      try {\n        document.addEventListener('test', null, testOptions);\n        document.removeEventListener('test', null, testOptions);\n      } catch (e) {// ignore\n      }\n\n      return passive;\n    }\n  }, {\n    key: 'eventListenerOptions',\n    value: function eventListenerOptions() {\n      var options = this.props.useCapture;\n\n      if (this.isPassiveSupported()) {\n        options = {\n          useCapture: this.props.useCapture,\n          passive: true\n        };\n      }\n\n      return options;\n    } // Set a defaut loader for all your `InfiniteScroll` components\n\n  }, {\n    key: 'setDefaultLoader',\n    value: function setDefaultLoader(loader) {\n      this.defaultLoader = loader;\n    }\n  }, {\n    key: 'detachMousewheelListener',\n    value: function detachMousewheelListener() {\n      var scrollEl = window;\n\n      if (this.props.useWindow === false) {\n        scrollEl = this.scrollComponent.parentNode;\n      }\n\n      scrollEl.removeEventListener('mousewheel', this.mousewheelListener, this.options ? this.options : this.props.useCapture);\n    }\n  }, {\n    key: 'detachScrollListener',\n    value: function detachScrollListener() {\n      var scrollEl = window;\n\n      if (this.props.useWindow === false) {\n        scrollEl = this.getParentElement(this.scrollComponent);\n      }\n\n      scrollEl.removeEventListener('scroll', this.scrollListener, this.options ? this.options : this.props.useCapture);\n      scrollEl.removeEventListener('resize', this.scrollListener, this.options ? this.options : this.props.useCapture);\n    }\n  }, {\n    key: 'getParentElement',\n    value: function getParentElement(el) {\n      var scrollParent = this.props.getScrollParent && this.props.getScrollParent();\n\n      if (scrollParent != null) {\n        return scrollParent;\n      }\n\n      return el && el.parentNode;\n    }\n  }, {\n    key: 'filterProps',\n    value: function filterProps(props) {\n      return props;\n    }\n  }, {\n    key: 'attachScrollListener',\n    value: function attachScrollListener() {\n      var parentElement = this.getParentElement(this.scrollComponent);\n\n      if (!this.props.hasMore || !parentElement) {\n        return;\n      }\n\n      var scrollEl = window;\n\n      if (this.props.useWindow === false) {\n        scrollEl = parentElement;\n      }\n\n      scrollEl.addEventListener('mousewheel', this.mousewheelListener, this.options ? this.options : this.props.useCapture);\n      scrollEl.addEventListener('scroll', this.scrollListener, this.options ? this.options : this.props.useCapture);\n      scrollEl.addEventListener('resize', this.scrollListener, this.options ? this.options : this.props.useCapture);\n\n      if (this.props.initialLoad) {\n        this.scrollListener();\n      }\n    }\n  }, {\n    key: 'mousewheelListener',\n    value: function mousewheelListener(e) {\n      // Prevents Chrome hangups\n      // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n      if (e.deltaY === 1 && !this.isPassiveSupported()) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: 'scrollListener',\n    value: function scrollListener() {\n      var el = this.scrollComponent;\n      var scrollEl = window;\n      var parentNode = this.getParentElement(el);\n      var offset = void 0;\n\n      if (this.props.useWindow) {\n        var doc = document.documentElement || document.body.parentNode || document.body;\n        var scrollTop = scrollEl.pageYOffset !== undefined ? scrollEl.pageYOffset : doc.scrollTop;\n\n        if (this.props.isReverse) {\n          offset = scrollTop;\n        } else {\n          offset = this.calculateOffset(el, scrollTop);\n        }\n      } else if (this.props.isReverse) {\n        offset = parentNode.scrollTop;\n      } else {\n        offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n      } // Here we make sure the element is visible as well as checking the offset\n\n\n      if (offset < Number(this.props.threshold) && el && el.offsetParent !== null) {\n        this.detachScrollListener();\n        this.beforeScrollHeight = parentNode.scrollHeight;\n        this.beforeScrollTop = parentNode.scrollTop; // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n\n        if (typeof this.props.loadMore === 'function') {\n          this.props.loadMore(this.pageLoaded += 1);\n          this.loadMore = true;\n        }\n      }\n    }\n  }, {\n    key: 'calculateOffset',\n    value: function calculateOffset(el, scrollTop) {\n      if (!el) {\n        return 0;\n      }\n\n      return this.calculateTopPosition(el) + (el.offsetHeight - scrollTop - window.innerHeight);\n    }\n  }, {\n    key: 'calculateTopPosition',\n    value: function calculateTopPosition(el) {\n      if (!el) {\n        return 0;\n      }\n\n      return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var renderProps = this.filterProps(this.props);\n\n      var children = renderProps.children,\n          element = renderProps.element,\n          hasMore = renderProps.hasMore,\n          initialLoad = renderProps.initialLoad,\n          isReverse = renderProps.isReverse,\n          loader = renderProps.loader,\n          loadMore = renderProps.loadMore,\n          pageStart = renderProps.pageStart,\n          ref = renderProps.ref,\n          threshold = renderProps.threshold,\n          useCapture = renderProps.useCapture,\n          useWindow = renderProps.useWindow,\n          getScrollParent = renderProps.getScrollParent,\n          props = _objectWithoutProperties(renderProps, ['children', 'element', 'hasMore', 'initialLoad', 'isReverse', 'loader', 'loadMore', 'pageStart', 'ref', 'threshold', 'useCapture', 'useWindow', 'getScrollParent']);\n\n      props.ref = function (node) {\n        _this2.scrollComponent = node;\n\n        if (ref) {\n          ref(node);\n        }\n      };\n\n      var childrenArray = [children];\n\n      if (hasMore) {\n        if (loader) {\n          isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n        } else if (this.defaultLoader) {\n          isReverse ? childrenArray.unshift(this.defaultLoader) : childrenArray.push(this.defaultLoader);\n        }\n      }\n\n      return _react2.default.createElement(element, props, childrenArray);\n    }\n  }]);\n\n  return InfiniteScroll;\n}(_react.Component);\n\nInfiniteScroll.propTypes = {\n  children: _propTypes2.default.node.isRequired,\n  element: _propTypes2.default.node,\n  hasMore: _propTypes2.default.bool,\n  initialLoad: _propTypes2.default.bool,\n  isReverse: _propTypes2.default.bool,\n  loader: _propTypes2.default.node,\n  loadMore: _propTypes2.default.func.isRequired,\n  pageStart: _propTypes2.default.number,\n  ref: _propTypes2.default.func,\n  getScrollParent: _propTypes2.default.func,\n  threshold: _propTypes2.default.number,\n  useCapture: _propTypes2.default.bool,\n  useWindow: _propTypes2.default.bool\n};\nInfiniteScroll.defaultProps = {\n  element: 'div',\n  hasMore: false,\n  initialLoad: true,\n  pageStart: 0,\n  ref: null,\n  threshold: 250,\n  useWindow: true,\n  isReverse: false,\n  useCapture: false,\n  loader: null,\n  getScrollParent: null\n};\nexports.default = InfiniteScroll;\nmodule.exports = exports['default'];","import styled from 'styled-components'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst FilmCardWrapper = styled.div`\r\n\tposition: relative;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tbackground-color: #f1f3f4;\r\n\twidth: 355px;\r\n\theight: 533px;\r\n\tmargin: 0;\r\n\tbackground-size: cover;\r\n\tbox-shadow: 0px 0px 10px -4px black;\r\n\t@media (max-width: 500px) {\r\n\t\twidth: 225px;\r\n\t\theight: 337px;\r\n\t}\r\n`\r\n\r\nconst Name = styled.h2`\r\n\tpadding: 5px;\r\n\tbox-sizing: border-box;\r\n\tdisplay: block;\r\n\tmin-height: 17%;\r\n\tbackground-color: rgb(0, 0, 0, 0.4);\r\n\tword-wrap: break-word;\r\n\twidth: 100%;\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tmargin: 0;\r\n\tcolor: rgba(255, 255, 255, 0.87);\r\n\tfont-size: 30px;\r\n\tfont-family: Tahoma, Sedona;\r\n\topacity: 0;\r\n\ttransition: opacity 0.1s ease-in;\r\n\t${FilmCardWrapper}:hover & {\r\n\t\topacity: 1;\r\n\t}\r\n\t@media (max-width: 1100px) {\r\n\t\topacity: 1;\r\n\t}\r\n`\r\n\r\nconst Description = styled.ul`\r\n\tpadding: 5px;\r\n\tbox-sizing: border-box;\r\n\tdisplay: block;\r\n\tmin-height: 17%;\r\n\tbackground-color: rgb(0, 0, 0, 0.4);\r\n\twidth: 100%;\r\n\tposition: absolute;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tmargin: 0;\r\n\topacity: 0;\r\n\tcolor: rgba(255, 255, 255, 0.87);\r\n\tfont-size: 14px;\r\n\tfont-family: Tahoma, Sedona;\r\n\ttransition: opacity 0.1s ease-in;\r\n\t${FilmCardWrapper}:hover & {\r\n\t\topacity: 1;\r\n\t}\r\n\t@media (max-width: 1100px) {\r\n\t\topacity: 1;\r\n\t}\r\n`\r\n\r\nconst StyledLink = styled(Link)`\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n`\r\n\r\nexport { FilmCardWrapper, Name, Description, StyledLink }\r\n","import React from 'react'\r\nimport Skeleton from 'react-loading-skeleton'\r\nimport { FilmCardWrapper, Name, Description, StyledLink } from './style'\r\nimport FilmCard from '../../models/FilmCard'\r\n\r\ninterface FilmCardProps {\r\n\tfilm?: FilmCard;\r\n}\r\n\r\nexport default function Film(props: FilmCardProps) {\r\n\tconst { film } = props\r\n\tif (film === undefined) {\r\n\t\treturn (\r\n\t\t\t<StyledLink to={'/'}>\r\n\t\t\t\t<FilmCardWrapper>\r\n\t\t\t\t\t<Skeleton height={533} />\r\n\t\t\t\t</FilmCardWrapper>\r\n\t\t\t</StyledLink>\r\n\t\t)\r\n\t}\r\n\tconst { id, overview, title, posterUrl } = film\r\n\treturn (\r\n\t\t<StyledLink to={`/film/${id}`}>\r\n\t\t\t<FilmCardWrapper\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tbackgroundImage: `url(https://image.tmdb.org/t/p/w500${posterUrl})`,\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Name>{title}</Name>\r\n\t\t\t\t<Description>{overview}</Description>\r\n\t\t\t</FilmCardWrapper>\r\n\t\t</StyledLink>\r\n\t)\r\n}\r\n","import styled from 'styled-components'\r\nconst FilmsWrapper = styled.ul`\r\n\tlist-style: none;\r\n\tmargin: auto;\r\n\tdisplay: grid;\r\n\tgrid-template-columns: repeat(auto-fill, minmax(355px, 1fr));\r\n\tgrid-gap: 20px;\r\n\talign-items: center;\r\n\tpadding: 25px 0;\r\n\t@media (max-width: 500px) {\r\n\t\tgrid-template-columns: 1fr;\r\n\t}\r\n`\r\nconst EmptyListPlaceholder = styled.h2`\r\n\tfont-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n\tfont-size: 30px;\r\n`\r\nexport { FilmsWrapper, EmptyListPlaceholder }\r\n","import React from 'react'\r\nimport FilmCard from '../FilmCard/FilmCard'\r\nimport InfiniteScroll from 'react-infinite-scroller'\r\nimport { FilmsWrapper, EmptyListPlaceholder } from './style'\r\nimport ReactLoading from 'react-loading'\r\nimport { FilmListProps } from '../../models/abstract'\r\n\r\nexport default function FilmList(props: FilmListProps) {\r\n\tconst { fetchData, films, error } = props\r\n\tconst { data, isLoading, currentPage, totalPages } = films\r\n\tif (error.isError) {\r\n\t\tthrow Error(error.error)\r\n\t}\r\n\tconst filmCards = data.map(film => (\r\n\t\t<li key={film.id}>\r\n\t\t\t<FilmCard film={film} />\r\n\t\t</li>\r\n\t))\r\n\tconst Preloader = Array(10)\r\n\t\t.fill(1)\r\n\t\t.map((a, index) => {\r\n\t\t\treturn (\r\n\t\t\t\t<li key={index}>\r\n\t\t\t\t\t<FilmCard />\r\n\t\t\t\t</li>\r\n\t\t\t)\r\n\t\t})\r\n\tif (filmCards.length === 0) {\r\n\t\treturn <EmptyListPlaceholder>{props.placeholder}</EmptyListPlaceholder>\r\n\t}\r\n\treturn (\r\n\t\t<InfiniteScroll\r\n\t\t\tpageStart={0}\r\n\t\t\tloadMore={() => fetchData()}\r\n\t\t\thasMore={isLoading ? false : currentPage <= totalPages}\r\n\t\t\tloader={<ReactLoading key={-1} type=\"bubbles\" color=\"black\" />}\r\n\t\t\tinitialLoad={false}\r\n\t\t>\r\n\t\t\t<FilmsWrapper>{isLoading ? [...filmCards, ...Preloader] : filmCards}</FilmsWrapper>\r\n\t\t</InfiniteScroll>\r\n\t)\r\n}\r\n"],"sourceRoot":""}